{{ 'gh.css' | asset_url | stylesheet_tag }}
{% render 'gh-algolia-setup' %}

<!-- robots -->
{% if product and product.tags contains 'no-index' %}
    <meta name="robots" content="noindex">
{% endif %}

<!-- canonical -->
{% if product %}
    {% assign gh_metafields = product.metafields.globalhealing %}
    {% if gh_metafields['product_canonical'] %}
        <link rel="canonical" href="{{ gh_metafields['product_canonical'] }}">
    {% else %}
        <link rel="canonical" href="{{ canonical_url }}">
    {% endif %}

{% elsif template contains 'collection' %}
    <link rel="canonical" href="{{ shop.url }}{{ collection.url }}" />
{% else %}
    <link rel="canonical" href="{{ canonical_url }}">
{% endif %}

<!-- gh script -->
<script>
  var gh={};String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),gh.utils={form:{validate:{email:function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}}},math:{moneyRound:function(e){return+(Math.round(e+"e+2")+"e-2")}},event:{create:function(e,t,o,n){document.addEventListener(e,(function(e){var i=e.target.closest(t);i&&(!1!==n&&e.preventDefault(),o(i,e))}),!1)}},style:{insert:(e,t)=>{if(t&&null!==document.getElementById(t))return void gh.utils.dev.log(`gh/utils/load/css: ${t} already loaded`);let o=document.createElement("link");o.href=e,o.type="text/css",o.rel="stylesheet",o.media="screen",t&&o.setAttribute("id",t),document.getElementsByTagName("head")[0].appendChild(o)}},script:{inits:{},load:function(e,t,o){if(o){if(!gh.utils.script.inits[o])return gh.utils.script.inits[o]={loaded:!1,callbacks:[t]},gh.utils.dev.log(`gh/utils/load/js: ${o} init created, callback added`),void gh.utils.script._loadScript(e,()=>{gh.utils.script.inits[o].loaded=!0,gh.utils.script.inits[o].callbacks.forEach(e=>e())},o);if(!0===gh.utils.script.inits[o].loaded)return gh.utils.dev.log(`gh/utils/load/js: ${o} already loaded, initiating callback`),void t();gh.utils.dev.log(`gh/utils/load/js: call for ${o} added to list of callbacks, init already existing`),gh.utils.script.inits[o].callbacks.push(t)}else gh.utils.script._loadScript(e,t,o)},_loadScript:(e,t,o)=>{let n=document.createElement("script");n.type="text/javascript",n.src=e,n.onload=t,n.async=!0,n.setAttribute("id",o),gh.utils.dev.log(`gh/utils/load/js: ${o} loading, callback inserted`),document.getElementsByTagName("head")[0].appendChild(n)},loadByIO:function(e,t,o,n){var i=this,s=document.querySelectorAll(e),r=new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&a(t)}))})),a=function(e){e.disconnect(),"complete"!==document.readyState?window.addEventListener("load",l):l()},l=function(){i.load(t,(function(){}),o)};if(s.length>0)s.forEach((function(e){r.observe(e)}));else{if(!1===n)return;a(r)}}},user:{device:{isMobile:()=>window.matchMedia("(max-device-width: 639px)").matches}},product:{reviews:{getSummary:function(e,t){fetch("https://api.yotpo.com/products/63EcnfHVSENo8yIBbBSY9uqxQxPZztn6xa7YvxGC/"+e+"/bottomline").then(e=>e.json()).then(e=>{e.status&&200===e.status.code&&e.response&&e.response.bottomline?t({average_score:e.response.bottomline.average_score,total_reviews:e.response.bottomline.total_reviews}):t({})})}}},url:{paramsAsObject:function(){var e=window.location.search.substring(1);return e?JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'):{}}},dev:{dev_mode:!1,log:function(e){gh.utils.dev.dev_mode&&console.log(e)}}},gh.defer={},gh.defer.createIO=(e,t)=>{let o=document.querySelectorAll(e),n=new IntersectionObserver((function(e,o){e.forEach((function(e){e.isIntersecting&&t(o,e)}))}));o.length>0&&o.forEach((function(e){n.observe(e)}))},gh.form=function(){let e=".ghc-form",t=".ghc-form__submit",o=".ghc-form__input";function n(e){e.querySelector(t).addEventListener("click",(function(){!function(e){if(e.classList.contains("loading"))return;let t=function(e){var t={};t.url=e.getAttribute("data-form-url"),t.is_eu="1",t.source_url=window.location.href,gh.utils.user.device.isMobile()?t["Source.Device"]="Mobile":t["Source.Device"]="Desktop";var o=gh.utils.url.paramsAsObject();return t=Object.assign(t,o),e.querySelectorAll("input[type=hidden]").forEach((function(e){t[e.getAttribute("name")]=e.value})),e.querySelectorAll("input, textarea, select").forEach((function(e){t[e.getAttribute("name")]=e.value})),t}(e);if(!t.url)return void gh.utils.dev.log("gh/form: URL is missing from the params");e.querySelectorAll("input[required], textarea[required], select[required]").forEach((function(e){let t=e.closest(o);t&&(e.value?t.classList.remove("error"):t.classList.add("error"))}));let n=e.querySelector(".eu-agree-checkbox"),i=e.querySelector(".eu-agree-checkbox.display-none");if(i)t[i.getAttribute("name")]=i.value;else if(n){if(!1===n.checked)return n.classList.add("error"),n.parentElement.classList.add("red"),!1;n.classList.remove("error"),n.parentElement.classList.remove("red")}if(0!==e.querySelectorAll(o+".error").length)return;e.classList.add("loading"),e.classList.remove("error"),((e,t)=>{let o=new URLSearchParams(e);fetch("https://globalhealing.com/ghcajax/subscribe/list/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},redirect:"follow",body:o}).finally(t)})(t,(function(){e.classList.remove("loading","error"),e.classList.add("success")}))}(e)}))}return{create:n,createAll:function(){document.querySelectorAll(e).forEach(e=>{n(e)})}}}(),gh.glide={create:(e,t,o)=>{gh.utils.dev.log("gh/glide: creating slider for ",e,t),gh.utils.script.load("https://cdn.globalhealing.com/web/v2/js/glidejs/glidejs.v3.6.0.min.js",()=>{new Glide(e,t).mount(),o&&o()},"gh--glide-js")}},gh.shopify={},gh.shopify.utils={defaultTo:(e,t)=>null==e||e!=e?t:e,formatMoney:(e,t)=>{t||(t="${amount}"),"string"==typeof e&&(e=e.replace(".",""));var o="",n=/\{\s*(\w+)\s*\}/,i=t||"${amount}";function s(e,t,o,n){if(t=gh.shopify.utils.defaultTo(t,2),o=gh.shopify.utils.defaultTo(o,","),n=gh.shopify.utils.defaultTo(n,"."),isNaN(e)||null==e)return 0;var i=(e=(e/100).toFixed(t)).split(".");return i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+o)+(i[1]?n+i[1]:"")}switch(i.match(n)[1]){case"amount":o=s(e,2);break;case"amount_no_decimals":o=s(e,0);break;case"amount_with_comma_separator":o=s(e,2,".",",");break;case"amount_no_decimals_with_comma_separator":o=s(e,0,".",",");break;case"amount_no_decimals_with_space_separator":o=s(e,0," ")}return i.replace(n,o)}},gh.slider={create:(e,t,o)=>{gh.utils.dev.log("gh/slider: creating slider for ",e,t),t.container=e,gh.utils.script.load("https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.2/min/tiny-slider.js",()=>{tns(t),o()},"gh--tinySlider-js"),gh.utils.style.insert("https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.3/tiny-slider.css","gh--tinySlider-css")},createByIO:(e,t,o)=>{gh.defer.function.observe(e,()=>{gh.slider.create(e,t,o)})}},gh.defer.class={observe:function(e){gh.defer.createIO(e,(function(e,t){t.target.classList.add(t.target.getAttribute("data-io-class")),e.unobserve(t.target)}))}},gh.defer.function={observe:function(e,t){gh.defer.createIO(e,(function(e,o){t(o.target),e.unobserve(o.target)}))}},gh.defer.img={observe:function(e){gh.defer.createIO(e,(function(e,t){t.target.setAttribute("src",t.target.getAttribute("data-io-src")),e.unobserve(t.target)}))}},gh.defer.jquery=function(){let e=[];return{addScript:t=>{e.push(t)},loadAll:()=>{e.length<1?gh.utils.dev.log("gh/defer/jquery: no jquery scripts to load, not loading jquery"):gh.utils.script.load("https://code.jquery.com/jquery-3.5.1.slim.min.js",()=>{e.forEach(e=>e(jQuery))},"jquery-slim")}}}(),gh.utils.event.create("click",'[data-scroll="smooth"]',(function(e){var t=e.getAttribute("href"),o=document.querySelector(t).offsetTop;scroll({top:o,behavior:"smooth"})}),!0),gh.modal=function(){function e(){document.querySelector(".gh--modal.open").classList.remove("open"),document.body.classList.remove("gh-modal-open")}return{init:function(){gh.utils.event.create("click","[data-gh-modal]",e=>{var t;t=e.getAttribute("data-gh-modal"),document.getElementById(t).classList.add("open"),document.body.classList.add("gh-modal-open")}),gh.utils.event.create("click",".gh--modal__close",()=>{e()}),gh.utils.event.create("click",".gh--modal.open",(t,o)=>{o.target.classList.contains("gh--modal")&&e()})}}}(),gh.modal.init(),gh.shopify.banner=function(){let e=!1;document.addEventListener("gh:locationData",t=>{e=t.detail.country});let t,o,n,i=!1,s=1e4;function r(e,i){if(t&&o)switch(e){case"left":n.innerHTML=theme.Currency.formatMoney(s-i),t.classList.remove("gh-cart-status--reached"),o.value=theme.Currency.formatMoney(i).replace("$","");break;case"remove":t.classList.add("hide");break;case"free":case"free-ghi":case"free-subscription":o.value="100",t.classList.add("gh-cart-status--reached");let r=e.replace("free","");r&&t.classList.add("gh-cart-status--reached-"+r)}}return{update:r,cartUpdated:function(a){!1===i&&(i=!0,t=document.querySelector(".gh-cart-progress"),o=t.querySelector("progress"),n=t.querySelector(".gh-cart-progress--money-left"));let l=a.detail.cart,c=gh.shopify.cart.hasSubscriptions(l),u=l.total_price,d="left";gh.shopify.customer&&gh.shopify.customer.isLoggedIn&&gh.shopify.customer.getInfo().tags.find(e=>e.includes("membership"))?r("free-ghi"):l.items.length<1?r(d,u):(d=c?"free-subscription":u<s?"left":"free",!1===e?document.addEventListener("gh:locationData",e=>{"United States"===e.detail.country?r(d,u):r("remove")}):"United States"===e?r(d,u):r("remove"))},setThreshold:function(e){s=e}}}(),gh.shopify.cart={hasSubscriptions:function(e){let t=!1;return e.items.forEach(e=>{e.selling_plan_allocation&&(t=!0)}),t}},gh.shopify.checkout=function(){let e,t=!1,o=["payment_method"];function n(e,t){fetch("https://globalhealing.com/api/prop65/getMessaging?skus="+e.join(",")).then(e=>e.text()).then(e=>{e&&t(e)})}function i(){let e=document.querySelector(".review-block .address");return!!e&&e.innerText}function s(e){if(!0===t)return;t=!0;let o=document.querySelector(".step__sections .section");o?(e=`<div class="gh--prop65-checkout-message">${e}</div>`,o.insertAdjacentHTML("afterend",e)):console.log("Gh/Checkout/Prop65: Unable to find target to add PROP 65 message.")}return{init:function(t){e=t,["readystatechange","page:load","page:change"].forEach(t=>{document.addEventListener(t,()=>{Shopify&&Shopify.Checkout&&o.includes(Shopify.Checkout.step)&&(function(){let e=i();return!!e&&(e.includes("United States")&&e.includes(" CA "))}()&&n(e,e=>s(e)),function(){let e=i();return!!e&&e.includes("Barbados")}()&&s("<h3>Notice</h3> Health Permit Required when shipping to Barbados"))})})},prop65Message:n}}(),gh.shopify.ordergroove=function(){let e=0,t=["39883232313544","39883232346312","41695120720072","40517489623240","40517489656008","39867296219336","42481580343496","42481606426824"];function o(e){setTimeout(()=>{let e=document.querySelector("og-offer");e&&(!1===e.subscribed?document.body.classList.remove("gh-status--subscription-selected"):document.body.classList.add("gh-status--subscription-selected"))},10)}return{init:function(n){e=n;let i,s,r,a,l=!1,c=()=>{let e=og.store.getState();e.eligibilityGroups&&e.eligibilityGroups[n]&&(e.eligibilityGroups[n].forEach(e=>{"impulse_upsell"===e&&(r=!0)}),r=!0===r),e.autoshipByDefault&&e.autoshipByDefault[n]&&(s=!0===e.autoshipByDefault[n]),!1===e.auth&&(a=!1),e.nextUpcomingOrder&&e.nextUpcomingOrder.status&&e.nextUpcomingOrder.products&&(e.nextUpcomingOrder.products.forEach(e=>{t.includes(e)&&(l=!0)}),a=e.nextUpcomingOrder&&1===e.nextUpcomingOrder.status),void 0!==s&&void 0!==r&&void 0!==a?u(l):i=requestAnimationFrame(c)},u=o=>{let i=og.offers.getOptins(""+n).length>0,r="no"===gh.utils.url.paramsAsObject().subscription;if(s){let e=og.store.getState(),t=!1;e.optedout.forEach(e=>{e.id===""+n&&(t=!0)}),t||r||document.body.classList.add("gh-status--subscription-selected")}i&&!r&&document.body.classList.add("gh-status--subscription-selected"),!0!==o||t.includes(""+e)||document.body.classList.add("gh--ordergroove-hide-upsells")};c(),setTimeout(()=>{cancelAnimationFrame(i)},6e3),og.offers.addOptinChangedCallback(e=>{!0===e.optedIn?document.body.classList.add("gh-status--subscription-selected"):document.body.classList.remove("gh-status--subscription-selected")}),document.querySelector('input[name="id"]').addEventListener("change",o)},onVariantChange:o}}(),gh.shopify.product={getSealsHtml:function(e,t,o){let n=document.getElementById(e);if(!n)return void gh.utils.dev.log("Gh/Seals: Container not found");o||(o=[]);let i={"USDA Organic":"https://cdn.globalhealing.com/products/seals/usda-organic.svg","Non-GMO Project Verified":"https://cdn.globalhealing.com/products/seals/non-gmo-project-verified.v2.svg","GMO Free":"https://cdn.globalhealing.com/products/seals/v2/gmo-free.svg",Vegan:"https://cdn.globalhealing.com/products/seals/v2/vegan-friendly.svg","Keto Friendly":"https://cdn.globalhealing.com/products/seals/v2/keto-friendly.svg","Gluten Free":"https://cdn.globalhealing.com/products/seals/gluten-free.grass.svg","No Animal Testing":"https://cdn.globalhealing.com/products/seals/no-animal-testing.grass.svg",Kosher:"https://cdn.globalhealing.com/products/seals/kosher.svg","Raw Herbal Extract":"https://cdn.globalhealing.com/products/seals/raw-herbal-extract.grass.svg","Energized Trace Minerals":"https://cdn.globalhealing.com/products/seals/energized-trace-minerals.grass.svg"},s="";o.forEach(e=>{i[e]&&(s+=t.replace("{url}",i[e]).replace("{name}",e))}),n.innerHTML=s}},gh.shopify.shop_pay=function(){function e(e){let t='<img \n\t\t\t\tclass="gh--shop-pay-logo"\n\t\t\t\tsrcset="https://cdn.globalhealing.com/web/img/vendor/shoppay/logo-color.png?w=65 1x, https://cdn.globalhealing.com/web/img/vendor/shoppay/logo-color.png?w=130 2x" \n\t\t\t\tsrc="https://cdn.globalhealing.com/web/img/vendor/shoppay/logo-color.png?w=65" \n\t\t\t\talt="Shop Pay">',o={available:`{original_price} or four interest-free payments of {payments}* with ${t} \n\t\t\t\t\t<a class="gh--shop-pay-trigger" data-toggle=".gh--shop-pay-disclaimer" data-toggle-class="hide" href="#">Learn More</a>`,unavailable:`Pay in full or in 4 interest-free installments for orders between $50 and $1000 with ${t} \n\t\t\t\t\t<a class="gh--shop-pay-trigger" data-toggle=".gh--shop-pay-disclaimer" data-toggle-class="hide" href="#">Learn More</a>`};if(e<5e3)return o.unavailable;let n=e/4;return o.available.replace("{original_price}",gh.shopify.utils.formatMoney(e)).replace("{payments}",gh.shopify.utils.formatMoney(n))}return{init:function(t,o){document.addEventListener("variant:change",t=>{let n=t.detail.variant.price;o.innerHTML=e(n)}),o.innerHTML=e(t)}}}(),gh.shopify.yotpo=function(){let e=localStorage.getItem("ip_country");return e?(document.querySelector("html").setAttribute("data-country",e),document.dispatchEvent(new CustomEvent("gh:locationData",{detail:{country:e}}))):window.addEventListener("allReady",(function(){let e=window.easylocation.locationData;if(e){let t=e.country.names.en;localStorage.setItem("ip_country",t),document.querySelector("html").setAttribute("data-country",t),document.dispatchEvent(new CustomEvent("gh:locationData",{detail:{country:t}}))}})),{campaignClick:function(e){if(!swellAPI)return;let t=swellAPI.getCustomerDetails().email;if(!t)return;let o=function(e,t){let o=e.parentElement.querySelector(".yotpo-title-text").innerText,n={"Earn 10 points when you follow us on TikTok":"https://globalhealing.com/api/yotpo/customAction/?email="+encodeURIComponent(t)+"&action=tiktok&redirect=https://www.tiktok.com/@globalhealing?"};return!!n[o]&&n[o]}(e,t);o&&(window.location=o)},ajaxCampaign:function(e,t){let o=`https://globalhealing.com/api/yotpo/customAction/?email=${encodeURIComponent(t)}&action=${e}`;fetch(o).then(e=>e.json()).then(e=>console.log(e))}}}(),gh.utils.event.create("click",".yotpo-overlay-tile .yotpo-submit-button",gh.shopify.yotpo.campaignClick,!0),gh.shopify.yotpo_loyalty=function(){function e(e,t){let o=t.querySelector(".gh-welcome-points-container");t.querySelector(".gh-welcome-points").innerHTML=e,o.setAttribute("data-points-filled","true"),o.classList.remove("hide")}return{populatePoints:function(t,o){(function(t,o){t(document).on("swell:setup",()=>{let t=swellAPI.getCustomerDetails();t&&t.pointsBalance&&t.pointsBalance>0?e(t.pointsBalance.toLocaleString("en-US"),o):e(0,o)})})(o,t=document.querySelector(t)),function(t){let o=t.querySelector(".gh-welcome-points-container");setTimeout(()=>{"false"===o.getAttribute("data-points-filled")&&e(0)},1e4)}(t)}}}(),gh.toggle={toggle:function(e){let t=e.getAttribute("data-toggle"),o=document.querySelectorAll(t),n=e.getAttribute("data-toggle-class"),i=e.getAttribute("data-toggle-active")||"active";o.forEach((function(t){e.classList.toggle(i),t.classList.toggle(n)}))}},gh.utils.event.create("click","[data-toggle]",gh.toggle.toggle),gh.tooltip={create:function(e,t){gh.utils.script.load("https://cdn.globalhealing.com/web/js/dev/tippy.min.js",()=>{tippy(e,t)},"gh--tippy")}};
</script>
{% render 'gh-header-scripts' %}

<!-- google consent -->
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }

  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'analytics_storage': 'denied',
    'wait_for_update': 500
  });
  gtag('set', 'ads_data_redaction', true);
</script>

<!-- GH customer setup -->
<script>
  gh.shopify.customer = {
    isLoggedIn: {% if customer %} true {% else %} false {% endif %},
    gh_shopify_customer_id: {{ customer.id | default: 0 }},
    getInfo: () => {
      return {
          {% if customer %}
        'name': '{{ customer.first_name }}',
        'email': '{{ customer.email }}',
        'tags': {{ customer.tags | json }},
        'id': {{ customer.id | json }}
          {% endif %}
      };
    }
  };
</script>


<!-- osano -->
<script src="https://cmp.osano.com/AzyjYPTMeGpxU5ypb/57396f93-7ef3-4b03-80ca-21fa163f6934/osano.js" defer></script>

<!-- glidejs for sliders -->
{{ 'vendor-glide-v3.6.0.core.css' | asset_url | stylesheet_tag }}
{{ 'vendor-glide-v3.6.0.theme.css' | asset_url | stylesheet_tag }}

<!-- yotpo -->
<script type="text/javascript">(function e() {
    var e = document.createElement('script');
    e.type = 'text/javascript', e.async = true, e.src = '//staticw2.yotpo.com/63EcnfHVSENo8yIBbBSY9uqxQxPZztn6xa7YvxGC/widget.js';
    var t = document.getElementsByTagName('script')[0];
    t.parentNode.insertBefore(e, t);
  })();</script>

<!-- amazon advertising tag -->
<script> !function(w, d, s, t, a) {
    if (w.amzn) return;
    w.amzn = a = function() {
      w.amzn.q.push([arguments, (new Date).getTime()]);
    };
    a.q = [];
    a.version = '0.0';
    s = d.createElement('script');
    s.src = 'https://c.amazon-adsystem.com/aat/amzn.js';
    s.id = 'amzn-pixel';
    s.async = true;
    t = d.getElementsByTagName('script')[0];
    t.parentNode.insertBefore(s, t);
  }(window, document);
  amzn('setRegion', 'NA');
  amzn('addTag', '4a2c9c67-d281-4933-8c02-92458790202b');
  amzn('trackEvent', 'PageView'); </script>
<noscript><img src="https://s.amazon-adsystem.com/iu3?pid=4a2c9c67-d281-4933-8c02-92458790202b&event=PageView" width="1"
               height="1" border="0"></noscript>

<!-- amazon advertising tag 2nd entity -->
<script>
       !function(w,d,s,t,a){if(w.amzn)return;w.amzn=a=function(){w.amzn.q.push([arguments,(new Date).getTime()])};a.q=[];a.version="0.0";s=d.createElement("script");s.src="https://c.amazon-adsystem.com/aat/amzn.js";s.id="amzn-pixel";s.async=true;t=d.getElementsByTagName("script")[0];t.parentNode.insertBefore(s,t)}(window,document);
       amzn("setRegion", "NA");
       amzn("addTag", "4a2c9c67-d281-4933-8c02-92458790202b");
       amzn("trackEvent", "PageView");
 </script>
 <noscript>
   <img src="https://s.amazon-adsystem.com/iu3?pid=4a2c9c67-d281-4933-8c02-92458790202b&event=PageView" width="1" height="1" border="0">
 </noscript>