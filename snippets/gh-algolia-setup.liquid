{{ 'gh-algolia-autocomplete.css' | asset_url | stylesheet_tag }}

<script>
  let gh_algolia = {
    autocomplete: {},
    instant: {}
  }
</script>

{% render 'gh-algolia-autocomplete-plugins' %}
{% render 'gh-algolia-autocomplete-templates' %}

<script>

  document.addEventListener('algolia.hooks.initialize', function() {

    algoliaShopify.hooks.registerHook('beforeAutocompleteOptions', function(options) {
      gh_algolia.autocomplete.plugins.getAll( algoliaShopify ).forEach( p => options.plugins.push(p) );
      options.openOnFocus = true;
      options.detachedMediaQuery = '';
      return options;
    });

    algoliaShopify.hooks.registerHook('beforeAutocompleteSuggestionsTemplate', gh_algolia.autocomplete.templates.suggestionsTemplate );
    algoliaShopify.hooks.registerHook('beforeAutocompleteMainTemplate', gh_algolia.autocomplete.templates.mainTemplate );
    algoliaShopify.hooks.registerHook('beforeAutocompleteProductTemplate', gh_algolia.autocomplete.templates.productsTemplate );

  });

</script>